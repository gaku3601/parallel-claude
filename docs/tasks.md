# Parallel Claude - タスク一覧

## フェーズ1: プロジェクトセットアップ

### 1.1 開発環境構築
- [ ] Electron + React + Vite のボイラープレート作成
- [ ] TypeScript設定
- [ ] 必要なパッケージのインストール
  - `electron`
  - `react`, `react-dom`
  - `vite`
  - `electron-builder` (ビルド用)
  - `node-pty` (ターミナルエミュレーション)
  - `xterm`, `xterm-addon-fit` (ターミナルUI)
- [ ] 基本的なフォルダ構成の作成
- [ ] ESLint/Prettier設定

**所要時間**: 2-3時間

---

## フェーズ2: 基本UI構築

### 2.1 アプリケーションウィンドウ
- [ ] Electronメインプロセスの基本セットアップ
- [ ] ウィンドウサイズ、位置の設定
- [ ] 開発者ツールの有効化（開発時のみ）

### 2.2 レイアウト構築
- [ ] サイドパネルとメインパネルの2カラムレイアウト
- [ ] リサイズ可能な分割パネル（オプション）
- [ ] 基本的なスタイリング（ダークテーマ）

### 2.3 サイドパネルUI
- [ ] プロジェクト一覧表示コンポーネント
- [ ] プロジェクト追加ボタン
- [ ] Worktree一覧表示コンポーネント
- [ ] Worktree追加ボタン（+）
- [ ] Worktree削除ボタン（🗑️）
- [ ] 折りたたみ/展開機能

### 2.4 メインパネルUI
- [ ] タブコンポーネント作成
- [ ] タブの切り替え機能
- [ ] タブの閉じる機能
- [ ] 空の状態表示（worktreeが選択されていない時）

**所要時間**: 4-5時間

---

## フェーズ3: データ管理・永続化

### 3.1 状態管理
- [ ] プロジェクトデータの型定義
  ```typescript
  interface Project {
    id: string;
    name: string;
    path: string;
    worktrees: Worktree[];
  }

  interface Worktree {
    id: string;
    name: string;
    path: string;
    branch: string;
  }
  ```
- [ ] React Context または Zustand でグローバル状態管理
- [ ] プロジェクト追加/削除のロジック
- [ ] Worktree追加/削除のロジック

### 3.2 データ永続化
- [ ] Electron Storeまたは独自のJSON保存機能
- [ ] 設定ファイルの読み書き
- [ ] アプリ起動時に前回の状態を復元

**所要時間**: 3-4時間

---

## フェーズ4: Git操作統合

### 4.1 Git Worktreeコマンド実装
- [ ] `git worktree list` でworktree一覧を取得
- [ ] `git worktree add` で新規worktreeを作成
- [ ] `git worktree remove` でworktreeを削除
- [ ] Git操作のエラーハンドリング

### 4.2 プロジェクト追加機能
- [ ] フォルダ選択ダイアログ（`dialog.showOpenDialog`）
- [ ] 選択されたフォルダがGitリポジトリか検証
- [ ] プロジェクトをアプリに登録

### 4.3 Worktree作成機能
- [ ] ランダムな都市名生成ロジック
  - 都市名リスト（Tokyo, Paris, London, New York, Berlin, Sydney等）
  - タイムスタンプ追加（オプション）
- [ ] 新規ブランチ作成
- [ ] git worktree addでworktreeを作成
- [ ] worktreeディレクトリの命名規則
  - 例: `../.worktrees/tokyo-20250107-1423`

### 4.4 Worktree削除機能
- [ ] `git worktree remove`でworktreeを削除
- [ ] ブランチの削除（オプション: ユーザー設定）
- [ ] UIから項目を削除

**所要時間**: 5-6時間

---

## フェーズ5: ターミナル統合

### 5.1 ターミナルエミュレーション
- [ ] node-ptyのセットアップ（Windowsでの動作確認）
- [ ] PowerShell/cmdでのptyプロセス起動
- [ ] xterm.jsでのターミナルUIレンダリング
- [ ] ptyとxtermの連携（入出力のバインディング）

### 5.2 Claude Code統合
- [ ] worktreeクリック時にターミナルを開く
- [ ] worktreeディレクトリに`cd`
- [ ] `claude`コマンドを自動実行
- [ ] Claudeセッションの開始確認

### 5.3 タブ管理
- [ ] 新しいworktreeを開くと新しいタブを作成
- [ ] タブ間の切り替え
- [ ] タブを閉じるとptyプロセスも終了
- [ ] アクティブなタブのハイライト

### 5.4 ターミナル基本機能
- [ ] コピー＆ペースト（Ctrl+C/Ctrl+V）
- [ ] スクロール機能
- [ ] ターミナルのリサイズ対応
- [ ] フォント・カラースキーム設定

**所要時間**: 6-8時間

---

## フェーズ6: ファイル添付機能

### 6.1 クリップボード監視
- [ ] Electronの`clipboard` APIを使用
- [ ] Ctrl+Vイベントのキャプチャ
- [ ] クリップボードに画像があるか判定

### 6.2 画像処理
- [ ] クリップボードから画像データを取得
- [ ] 一時ファイルとして保存（`%TEMP%/parallel-claude/`）
- [ ] 対応フォーマット: PNG, JPEG, GIF, WebP

### 6.3 Claude Codeへの送信
- [ ] Claude Code CLIの`--file`オプション調査
- [ ] ptyプロセス経由でファイルパスを送信
- [ ] または画像を直接stdinに送る方法を検討

**課題**: Claude Code CLIがターミナルセッション中にどのようにファイルを受け付けるか要調査

**所要時間**: 4-5時間

---

## フェーズ7: エラーハンドリング・UX改善

### 7.1 エラーハンドリング
- [ ] Git操作失敗時のエラーメッセージ表示
- [ ] Claude CLIが見つからない場合の警告
- [ ] ptyプロセス起動失敗時の処理
- [ ] 存在しないパスの検証

### 7.2 UX改善
- [ ] ローディング状態の表示
- [ ] トースト通知（成功/失敗メッセージ）
- [ ] キーボードショートカット
  - `Ctrl+T`: 新規worktree作成
  - `Ctrl+W`: タブを閉じる
  - `Ctrl+Tab`: タブ切り替え
- [ ] ツールチップ表示

### 7.3 確認ダイアログ
- [ ] Worktree削除の確認（オプション: 設定で無効化可能）
- [ ] プロジェクト削除の確認

**所要時間**: 3-4時間

---

## フェーズ8: ビルド・パッケージング

### 8.1 本番ビルド設定
- [ ] electron-builderの設定
- [ ] Windows向けインストーラー作成（.exe）
- [ ] アプリアイコンの作成
- [ ] 署名設定（将来的に）

### 8.2 テスト
- [ ] 各機能の手動テスト
- [ ] エッジケースのテスト
  - worktreeが既に存在する場合
  - ブランチ名の重複
  - 権限エラー
- [ ] パフォーマンステスト

### 8.3 ドキュメント
- [ ] README.md作成
- [ ] インストール手順
- [ ] 使い方ガイド
- [ ] トラブルシューティング

**所要時間**: 3-4時間

---

## オプション機能（MVP後）

### 将来的な追加機能
- [ ] ドラッグ&ドロップでのファイル添付
- [ ] Worktreeの名前変更
- [ ] カスタムテーマ設定
- [ ] ターミナルのフォント/サイズ設定UI
- [ ] プロジェクトテンプレート機能
- [ ] Git操作のGUIサポート
- [ ] 会話履歴の保存・検索

---

## 見積もり合計

- フェーズ1: 2-3時間
- フェーズ2: 4-5時間
- フェーズ3: 3-4時間
- フェーズ4: 5-6時間
- フェーズ5: 6-8時間
- フェーズ6: 4-5時間
- フェーズ7: 3-4時間
- フェーズ8: 3-4時間

**合計**: 30-39時間（実装のみ、学習時間除く）

---

## 優先度付けされたタスク順序

MVP実装のための推奨順序:

1. **フェーズ1**: 開発環境構築（必須）
2. **フェーズ2**: 基本UI構築（必須）
3. **フェーズ3**: データ管理（必須）
4. **フェーズ4**: Git操作統合（コア機能）
5. **フェーズ5**: ターミナル統合（コア機能）
6. **フェーズ6**: ファイル添付機能（重要だが後回し可能）
7. **フェーズ7**: エラーハンドリング・UX改善
8. **フェーズ8**: ビルド・パッケージング

**最小限のMVP**: フェーズ1-5まで実装すれば基本機能は動作します。
